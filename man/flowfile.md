## 処理フローファイルについて
処理フローファイルの記述方法を説明します。

### 概要
+ 基本的な命令と言語の思想(=スタック志向)はPietと同じです。Pietの仕様がわかれば、何とかわかると思います。
+ ただし、以下の違いがあります。
  + Pietの命令のうち、switch命令、pointer命令はありません。
  + Pietの命令にはない、if命令、goto命令、end命令があります。
  + 「ラベル」という概念があります。

### 「ラベル」について
+ ジャンプ・条件分岐の行き先を示します。
  + `:`で始まる文字列です(`:`を除き1文字以上)。
  + 使用できる文字は、半角英数字とアンダースコア`_`のみです。
  + **`:`の直後1文字目に数字は使用できません。**
+ ラベルを付けたいところに、例えば`:hogehoge`のように記述すれば、その位置に「`hogehoge`」という名前のラベルがつきます。
+ 後述のif命令、goto命令で`:hogehoge`を指定すれば、`:hogehoge`と書いた位置にジャンプします。

### 命令語について
+ Pietのコマンド、および、プログラムの制御構造を指定するためのものです。
+ 一部の命令語にはオペランド（引数）が必要です。具体的なオペランドの付け方は後述します。
+ 下表に命令語一覧を示します。

|命令語|説明|オペランド|Pietに命令があるか|
|-|-|-|-|
|push|スタックに値をプッシュする|必要|あり|
|pop|スタックから値をポップする|不要|あり|
|add|スタックから2つ値をポップし、上から2番目の値と上から1番目の値の和を計算し、結果をプッシュする|不要|あり|
|sub|スタックから2つ値をポップし、上から2番目の値と上から1番目の値の差を計算し、結果をプッシュする|不要|あり|
|mul|スタックから2つ値をポップし、上から2番目の値と上から1番目の値の積を計算し、結果をプッシュする|不要|あり|
|div|スタックから2つ値をポップし、上から2番目の値を上から1番目の値で割った商を計算し、結果をプッシュする|不要|あり|
|mod|スタックから2つ値をポップし、上から2番目の値を上から1番目の値で割った剰余を計算し、結果をプッシュする|不要|あり|
|gt|スタックから2つ値をポップし、上から2番目の値が上から1番目の値より大きければ1を、そうでなければ0をプッシュする|不要|あり| 
|not|スタックから1つ値をポップし、ポップした値が0ならば1を、そうでなければ0をプッシュする|不要|あり|
|dup|スタックから1つ値をポップし、同じ値を2回プッシュする|不要|あり|
|roll|スタックから2つ値をポップし、上から2番目の値と等しい深さのスタック回転を、上から1番目の値と等しい回数だけ行う|不要|あり|
|inc|標準入力から1文字読み取り、文字コードに対応する数値をスタックにプッシュする|不要|あり|
|inn|標準入力から数値を1つ読み取り、同じ値をスタックにプッシュする|不要|あり|
|outc|スタックから1つ値をポップし、ポップした値で表現される文字を出力する|不要|あり| 
|outn|スタックから1つ値をポップし、ポップした値を出力する|不要|あり|
|if|スタックから1つ値をポップし、ポップした値か0ならオペランドの2つ目のラベルに、0でないならオペランドの1つ目のラベルに ジャンプする|必要|なし|
|goto|オペランドの示すラベルに ジャンプする|必要|なし|
|end|プログラムを停止する|不要|なし|

#### オペランドが必要な命令
+ 共通事項：**命令語とオペランドの間や、オペランド同士の間にスペースを入れてはいけません。**
+ push命令
  + スタックにプッシュする値（正の整数）を記述します。
  + 書き方：`push`の直後に**数字のみで**記述します。
    + 数字は10進数として解釈されます。
    + `push`の直後に`0`は記述できません。
  + 例：`push12`, `push3`など
+ goto命令
  + ジャンプ先のラベルを指定します。
  + 書き方：`goto:xxx`
    + ラベル`:xxx`の位置まで無条件でジャンプします。
+ if命令
  + 条件判断後にジャンプするラベルを指定します。
  + 書き方：`if:xxx:yyy`
    + この命令はスタックから1つ値をポップします。
      + ポップした値が0以外なら、ラベル`:xxx`の位置までジャンプします。
      + ポップした値が0なら、ラベル`:yyy`の位置までジャンプします。
    + なお、ラベルは省略可能です。省略した場合、次のコマンドを実行します。
      + 例：`if::LABEL`…ポップした値が0以外なら次のコマンドに、0ならラベル`:LABEL`に、それぞれジャンプします。
      + 例：`if:LABEL:`…ポップした値が0以外ならラベル`:LABEL`に、0なら次のコマンドに、それぞれジャンプします。
      + 2つとも省略することは非推奨です。

#### コメント
+ `#`以降は行末まで無視されます。

#### その他全体の注意点
+ 命令語とラベルは、半角スペースまたは改行で区切ります。
+ 命令語とラベルは、1行にいくつ書いてもかまいません。
+ コメント開始を示す`#`の前にも、半角スペースまたは改行による区切りが必要です。
+ **タブ区切りは現状未対応です。**
+ 命令語、ラベル、コメントが正しく解釈できない場合、**解釈できなかった部分は特にエラーなく無視して処理を進めます**ので、ご注意ください。
  + TODO:解釈不可時にエラーなどを出す
+ プログラムが迷子にならないよう、必ずどこかにジャンプするか`end`で止めてください。

### サンプルプログラム
[samples](samples)以下にサンプルがあります。


